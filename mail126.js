
(function(){Object.BREAK="break";Object.CONTINUE="continue";Object.CLASSERROR="not found class";Object.EMPTYFUNC=function(){};Object.createClass=g;Object.getClass=m;Object.extend=l;Object.mix=q;Object.inherit=d;Object.isFunction=a;Object.isArray=e;Object.compare=n;Object.clone=j;Object.isEmpty=c;Object.each=i;Object.count=f;Object.has=p;Object.toArray=b;Object.emptyFunction=o;Object.fix=k;var h=Object.createClass("netease.mail.base.Object");if(!window.gPurePrototype){Object.extend(h,Object)}function g(y,t){var s=function(){if(this.initialize){var A;return this.initialize.apply(this,arguments)}};if(arguments.length>0){var x=t?(y+"."+t):y;var r=window;var z=x.split(".");for(var w=0,u=z.length;w<u;w++){var v=z[w];if(w==u-1){r[v]=s}else{switch(typeof r[v]){case"undefined":r[v]={};break;case"number":case"string":case"boolean":r[v]=new r[v].constructor(r[v]);break;case"object":case"function":break;default:}r=r[v]}}}return s}function m(z,t){try{var s;var y=t?(z+"."+t):z;var A=y.split(".");var r=window;for(var x=0,u=A.length;x<u;x++){var w=A[x];if(x==u-1){s=r[w]}else{r=r[w]}}if(!s){throw Object.CLASSERROR}return s}catch(v){throw Object.CLASSERROR}}function l(v,r,s){for(var t in r){if(t=="prototype"){continue}try{if(!s||!this.has(v,t)){v[t]=r[t]}}catch(u){}}try{if(r.toString!=r.constructor.prototype.toString){if(!s){v.toString=r.toString}}}catch(u){}return v}function q(u,x,t,w,s){if(!u.superClass){u.superClass={}}for(var v in x){if(Object.isFunction(x[v])){if(!u.superClass[v]){u.superClass[v]=x[v]}else{var r=u.superClass[v];u.superClass[v]=function(y,z){return function(){z.apply(this,arguments);x[y].apply(this,arguments)}}(v,r)}}else{u.superClass[v]=x[v]}if(!u[v]){u[v]=x[v]}}if(t){Object.extend(u,t)}if(x.toString!=x.constructor.prototype.toString){u.superClass.toString=function(){x.toString.apply(u,arguments)}}if(typeof w=="object"){s=w;w=true}if(w&&u.prototype&&x.prototype){this.inherit(u,x,s||{})}return u}function d(s,u,r){var v=function(){};v.prototype=u.prototype;s.prototype=new v();s.prototype.constructor=s;s.superConstructor=u;s.superClass=u.prototype;if(u._onInherit){try{u._onInherit(s)}catch(t){}}if(r){Object.extend(s.prototype,r)}}function a(r){return this.prototype.toString.call(r)==="[object Function]"}function e(r){return this.prototype.toString.call(r)==="[object Array]"}function n(v,t){if(typeof(v)==typeof(t)){if(typeof(v)!="object"){return v===t}else{if(v===t){return true}else{if(this.isArray(v)&&this.isArray(t)){if(v.length!=t.length){return false}for(var s=0,r=v.length;s<r;s++){if(!this.compare(v[s],t[s])){return false}}return true}else{if(!this.isArray(v)&&!this.isArray(t)){if(Object.count(v)!=Object.count(t)){return false}for(var u in v){if(t[u]==undefined){return false}if(!this.compare(v[u],t[u])){return false}}return true}else{return false}}}}}else{return false}}function j(r){if(r==null||typeof(r)!="object"){return r}else{if(r.constructor!=Object&&r.constructor!=Array){return r}else{if(r.constructor==Date||r.constructor==RegExp||r.constructor==Function||r.constructor==String||r.constructor==Number||r.constructor==Boolean){return new r.constructor(r)}else{try{var t=new r.constructor();for(var s in r){t[s]=Object.clone(r[s])}return t}catch(u){return r}}}}}function c(s){if(this.isArray(s)){return this.length==0}else{for(var r in s){return false}return true}}function i(u,s){if(this.isArray(u)){u.each(s)}else{try{for(var r in u){try{s(r,u[r])}catch(t){if(t!=this.CONTINUE){throw t}}}}catch(t){if(t!=this.BREAK){throw t}}}}function f(t){var s=0;if(this.isArray(t)){s=t.length}else{for(var r in t){s++}}return s}function p(u,s){var r=false;for(var t in u){if(t==s){r=true;break}}return r}function b(u){var s=[];if(u.length){for(var t=0,r=u.length;t<r;t++){s.push(u[t])}}return s}function o(){return this.EMPTYFUNC}function k(w){var t=w.ns;var s=w.method;var v=w.fix1;var u=w.fix2;var r=w.scope;if(t&&s){var x=t[s];t[s]=function(){if(v){try{v.apply(r||this,arguments)}catch(z){}}var y=x.apply(r||this,arguments);if(u){try{u.apply(r||this,arguments)}catch(z){}}return y}}}})();(function(){var b="netease.mail.base";var a=Object.createClass(b,"Const");Object.extend(a,{});window.undefined=window.undefined})();(function(){var d=Object.createClass("netease.mail.base.Array");Object.extend(d,{findObject:c,clone:b,each:h,_match:i,has:a,replace:g,remove:e,extend:f});if(!window.gPurePrototype){Object.extend(Array.prototype,d)}function i(n,l,k,m){if(arguments.length!=4){k=Object.isFunction(l);m=l instanceof RegExp}var j=false;if(k){if(l(n)){j=true}}else{if(m){if(n.toString().search(l)>-1){j=true}}else{if(n==l){j=true}}}return j}function c(k,l){var j;this.each(function(m,n){if(typeof(n)=="object"){if(n[k]==l){j=n;throw Object.BREAK}}});return j}function b(){return this.slice(0)}function h(n){for(var k=0,j=this.length;k<j;k++){try{n(k,this[k])}catch(l){if(l===Object.BREAK){break}else{if(l===Object.CONTINUE){continue}else{throw l}}}}}function a(m){var k=this;var j=false;var l=Object.isFunction(m);var n=m instanceof RegExp;k.each...I){F=F||"entry";if(I){I[F](G)}})}function g(N,F){try{var P=JS.modules[N];var K=(P||{}).mtype;var O;var R,H;if(P&&K=="outlink"&&P.key){F={key:P.key}}if(K=="read"){var M=P.fid;if(M){O=s.getTreeId("folder",M)||s.getTreeId("pop",M)}}if(K=="list"){var M=F.fid;if(M){O=s.getTreeId("folder",M)||s.getTreeId("pop",M)}else{if(F.showFlag){O=s.getTreeId("folder","-2")}else{if(P.fid==0&&P.tag&&P.tag.length>0){var J=P.tag[0];var H=$I("init.Tag").list()[J].id;O=s.getTreeId("tag",H)}else{var M=P.fid;O=s.getTreeId("folder",M)||s.getTreeId("pop",M)}}}}else{if(N=="contact.ContactModule"||(K=="outlink"&&F.key=="groups")){O=s.getTreeId("address","0")}else{if(K=="outlink"&&F.key=="schedule"){O=s.getTreeId("address","1")}else{if(K=="outlink"&&F.key.indexOf("buzz")>-1){O=s.getTreeId("address","2")}else{if(K=="outlink"){var G=s.data.findObject("name","service").data.findObject("name",F.key);if(G){O=s.getTreeId("service",G.id)}}}}}}if(O){var I=$C(O);if(I){I.focus()}}else{var Q=s.tree.focusItem;if(Q){Q.blur()}}}catch(L){}}function a(F,G){var H;if(arguments.length==2){H=F+":"+G}else{H=sGourp}return s.cptItems[H]}function l(F,G){return $C(s.getTreeId(F,G)||"none")}function B(H,I){if(!H){var F=s.receiveAllIcon.getEl();G(F,true)}else{G(s.popReceiveIcon[H])}function G(K,L){if(!K){return}K.setClass(s[I+"Class"]);if(I=="receive"&&!L){var J=K.dom.parentNode.parentNode.getElementsByTagName("B")[1];if(J){$(J).addClass("fn-animation-jump");setTimeout(function(){$(J).removeClass("fn-animation-jump")},2000)}}}}function n(F){return F.display==1||(F.display==2&&F.count)}function w(ah){var ac=ah.key;var X=ah.group||"service";var aq=ah.call||arguments[1];var Y=ah.disabled||ah.del||arguments[2];var T=ah.setDefault;var ab;var al=Y?0:1;if(T){z.set({field:"ntes_defined",value:"",call:function(){s.show();if(aq){aq()}s.setServiceEnable({group:"address",key:"schedule"});s.setServiceEnable({group:"address",key:"buzz"})}});return}if("display" in ah){al=ah.display}Y=al==0;var I=ah.exchange;var W=s.data.findObject("name",X);var ai;if("id" in ah){ai=ah.id}else{if(typeof ac!="undefined"){ai=(W.data.findObject("id",ac)||W.data.findObject("name",ac)).id}}if(X=="address"&&ai=="-1"){var F=$S("isyeah")?"yeahwebim":"webim";var Q=$S("isyeah")?al==1?0:1:al;z.set({field:"ntes_contact",flag:F,value:Q,call:function(){if((Q&&!$S("isyeah"))||(!Q&&$S("isyeah"))){$("spnIMInfo").show();Ext.load(F)}else{$("spnIMInfo").hide()}}});return}var P=typeof ai!="undefined";if(P){var V=W.data.findObject("id",ai);ab=V.display;var U=V.ud;if(U){var aj={};Object.extend(aj,U);aj.value=al?U.enableValue:U.disableValue;aj.call=function(){s.show()};z.set(aj);return}}function J(at){if(I){var au=at.split("^");var ar,ax;for(var av=0;av<au.length;av++){if(au[av].indexOf(I[0]+"|")==0){ar=av}if(typeof I[1]!="undefined"&&au[av].indexOf(I[1]+"|")==0){ax=av}}var aw=au[ar];if(typeof ax!="undefined"){au.splice(ax,0,aw);au.splice(ax>ar?ar:ar+1,1)}else{au.splice(ar,1);au.push(aw)}return au.join("^")}return at}var N=attrs.user.ntes_defined||"";if(N){var M=N.split("*");var O="";var af=new RegExp("(^|\\^)"+ai+"\\|.");var ao=ai+"|"+al;var R=s.data.findObject("name",X).custom;switch(X){case"service":if(!I){M[0]=R.replace(new RegExp("(^|\\^)"+ai+"\\|"+ab),"$1"+ao);if(!af.test(M[0])){M[0]+="^"+ao}}break;case"folder":case"pop":var ak=R||"";if(al==1){M[1]=ak.replace(af,"");if(M[1].indexOf("^")==0){M[1]=M[1].substr(1)}}else{M[1]=ak.replace(af,"$1"+ao);if(!af.test(M[1])){M[1]+=((ak==""?"":"^")+ao)}}break;case"filecenter":var ad=R||"";if(ad&&ad.indexOf(",")>-1){ad=ad.split(",").join("|0^")+"|0"}var ap=ad.split("^");if(ad==""){ap=[]}if(!Y){ap.remove(ai+"|0")}else{if(!ap.has(ai+"|0")){ap.push(ai+"|0")}}M[2]=ap.join("^");break;case"tag":var an=R||"";if(al==1||ah.del){M[3]=an.replace(af,"");if(M[3].indexOf("^")==0){M[3]=M[3].substr(1)}}else{M[3]=an.replace(af,"$1"+ao);if(!af.test(M[3])){M[3]+=((an==""?"":"^")+ao)}}break}M[0]=J(M[0]);O=M.join("*");if(O!=N){z.set({field:"ntes_defined",value:O,call:function(){s.show();if(aq){aq()}}})}}else{var L=s.data.findObject("name","service").data;var Z=[];for(var am=0;am<L.length;am++){var K=L[am].id;var G=L[am].display;if(K==ai&&X=="service"&&!I){G=al}Z.push(K+"|"+(G?"1":"0"))}var ak="",ad="",ag="";if(X=="filecenter"&&al==0){ad=P?ai+"|0":""}if(X=="tag"&&(al==0||al==2)){ag=P?ai+"|"+al:""}var aa=s.data.findObject("name","folder").data;for(var am=0;am<aa.length;am++){var ae=aa[am];var S=ae.id-0;if(P&&ai==S){if(al==0||al==2){ak+=(ak==""?"":"^")+ai+"|"+al}}else{if(S>3){ak+=(ak==""?"":"^")+S+"|0"}}}aa=s.data.findObject("name","pop").data;for(var am=0;am<aa.length;am++){var ae=aa[am];var S=ae.id-0;if(P&&ai==S){if(al==0||al==2){ak+=(ak==""?"":"^")+ai+"|"+al}}}var H=J(Z.join("^"));z.set({field:"ntes_defined",value:[H,ak,ad,ag].join("*"),call:function(){s.show();if(aq){aq()}}})}if(X=="tag"&&ah.del){s.show()}}function c(F){var H=$C(F);try{if(H&&H.rawConfig.data.group=="folder"){return H.rawConfig.data.id}}catch(G){}}function p(){$I("listeners.FoldeListener").listen("add",function(F){s.show()})}})();
